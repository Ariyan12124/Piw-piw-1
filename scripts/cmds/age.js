/**
 * Script Name: age.js
 * ржорзВрж▓ рж▓рзЗржЦржХ: Mahmud X
 * ржХрзНрж╖рзНржпрж╛ржкрж╛ рж╕ржВрж╕рзНржХрж░ржгрзЗ рж░рж┐ржорж┐ржХрзНрж╕ ржХрж░рзЗржЫрзЗ: Amit Max тЪб
 * 
 * ржмрж┐ржмрж░ржг: ржЬржирзНржо рждрж╛рж░рж┐ржЦ ржжрж┐ржпрж╝рзЗ рждрзЛрж░ ржмржпрж╝рж╕ ржХржд рж╣ржЗржЫрзЗ рждрж╛ рж╣рж┐рж╕рж╛ржм ржХрж░рзЗ, рж╕рж╛ржерзЗ ржХрзНрж╖рзНржпрж╛ржкрж╛ржорзЛржУ ржмрзЛржирж╛рж╕рзЗ!
 */

const axios = require("axios");

module.exports = {
  config: {
    name: "age",
    aliases: [],
    version: "1.0",
    author: "Mahmud X & Amit Max тЪб",
    countDown: 5,
    role: 0,
    shortDescription: {
      en: "рждрзЛрж░ ржмржпрж╝рж╕ ржХрждрзЛ рж╣ржЗржЫрзЗ ржмрзБржЭрж┐рж╕?"
    },
    longDescription: {
      en: "рждрзЛржжрзЗрж░ ржЬржирзНржоржжрж┐ржи ржЧрзБржирзЗ ржЧрзБржирзЗ ржмрж▓ржмрзЛ ржХрждрзЛ ржкрзБрж░рж╛ржи рж╣ржЗржЫрж╕!"
    },
    category: "utility",
    guide: {
      en: "{pn} [YYYY-MM-DD] тАФ ржЬржирзНржо рждрж╛рж░рж┐ржЦржЯрж╛ ржжрж┐ржмрж┐, ржирж╛ рж╣рж▓рзЗ ржЭрж╛рзЬ ржЦрж╛ржмрж┐!"
    }
  },

  onStart: async function ({ api, event, args }) {
    const input = args.join(" ");

    if (!input) {
      return api.sendMessage("ржУржЗ рж▓рзБржЪрзНржЪрж╛! ржЖржЧрзЗ рждрзЛрж░ ржЬржирзНржо рждрж╛рж░рж┐ржЦ ржжрзЗ тАФ YYYY-MM-DD ржлрж░ржорзНржпрж╛ржЯрзЗ, ржмрзБржЭрж▓рж┐?!", event.threadID, event.messageID);
    }

    try {
      const response = await axios.get(`https://api.popcat.xyz/age?dob=${input}`);
      const data = response.data;

      const message = 
`ЁЯУЕ ржЬржирзНржоржжрж┐ржирзЗрж░ ржЦрждрж┐ржпрж╝рж╛ржи (Mahmud X & Amit Max тЪб рж░рзЗ ржзржирзНржпржмрж╛ржж ржжрж┐рж╕!)

ЁЯФЮ рждрзБржЗ рж╣ржЗржЫрж╕ржГ ${data.age} ржмржЫрж░ ржзрж░рзЗрж░ ржнрзАржорж░рждрж┐
ЁЯУЖ ржЬржирзНржо рждрж╛рж░рж┐ржЦржГ ${data.date}

тП░ ржЬржирзНржорзЗрж░ ржкрж░ рждрзБржЗ ржмрзБрзЬрж╛ рж╣ржЗржЫрж╕ ржПржЗржЯрзБржХрзБржГ
    тАв ржжрж┐ржи ржкрж╛рж░ рж╣ржЗржЫрзЗ: ${data.days_old} ржЯрж╛ ржжрж┐ржи!
    тАв рж╕ржкрзНрждрж╛рж╣ рж╣ржЗржЫрзЗ: ${data.weeks_old} ржЯрж╛ рж╕ржкрзНрждрж╛рж╣
    тАв ржорж╛рж╕ ржЧрзБржиржЫрж╕: ${data.months_old} ржЯрж╛ ржорж╛рж╕
    тАв ржШржгрзНржЯрж╛ ржЧрзБржЗрж▓ржЫрж╕: ${data.hours_old} ржШржгрзНржЯрж╛
    тАв ржорж┐ржирж┐ржЯ ржкрж╛рж░ рж╣ржЗржЫрзЗ: ${data.minutes_old} ржорж┐ржирж┐ржЯ

рж╕ржм рж╣рж┐рж╕рж╛ржм ржжрж┐рж▓рж╛ржо, ржПржЦржи рждрзБржЗ ржЪрж╛ржЗрж▓рзЗ ржХрж╛ржЗржирзНржжрж╛ ржирж┐рж╕!`;

      return api.sendMessage(message, event.threadID, event.messageID);
    } catch (error) {
      console.error("API ржлрж╛ржЯрж╛рзЯ ржжрж┐ржЫрзЗ:", error);
      return api.sendMessage("ржзрзБрж░ ржмрзЗржЯрж╛, ржарж┐ржХржорждрзЛ ржЬржирзНржо рждрж╛рж░рж┐ржЦ рж▓рж┐ржЦ ржирж╛! ржЖржмрж╛рж░ ржЖрж╕рж┐рж╕!", event.threadID, event.messageID);
    }
  }
};
